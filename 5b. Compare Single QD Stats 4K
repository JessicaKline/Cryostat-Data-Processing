{"cells":[{"cell_type":"code","execution_count":null,"metadata":{"id":"_MEfvP55tFmE"},"outputs":[],"source":["#### Mount Sharepoint #####\n","\n","!wget https://downloads.rclone.org/v1.61.1/rclone-v1.61.1-linux-amd64.deb\n","!apt install ./rclone-v1.61.1-linux-amd64.deb\n","\n","!rclone config\n","\n","!sudo mkdir /content/sharepoint\n","!nohup rclone --vfs-cache-mode writes mount sharepoint: /content/sharepoint &\n","\n","#### Mount Sharepoint #####"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","id":"vJBJ6EQftMYy"},"outputs":[],"source":["#@title imports\n","#### Common Imports #####\n","\n","import matplotlib.pyplot as plt\n","import numpy as np\n","import pandas as pd\n","from matplotlib.ticker import MultipleLocator\n","import math\n","import os\n","from os import listdir\n","from os.path import isfile, join\n","import logging\n","from scipy import optimize\n","import seaborn as sns\n","\n","#### Common Imports #####\n","\n","#### RC Params #####\n","\n","plt.rcParams['savefig.dpi'] = 300\n","plt.rcParams['font.size'] = 22\n","plt.rcParams['font.family'] = 'sans-serif'\n","plt.rcParams['font.sans-serif'] = 'Arial'\n","plt.rcParams['xtick.major.pad']='10'\n","plt.rcParams['ytick.major.pad']='4'\n","\n","logging.getLogger('matplotlib.font_manager').disabled = True\n","\n","#### RC Params #####\n"]},{"cell_type":"code","execution_count":null,"metadata":{"cellView":"form","id":"LLI7xFaAtS5J"},"outputs":[],"source":["#@title helper functions\n","\n","#### Common Helper Functions #####\n","\n","def save_fig(filename):\n","  plt.savefig(filename, bbox_inches = 'tight')\n","\n","def read_csv(file_path):\n","  g2 = pd.read_csv(file_path)\n","  g2 = g2.to_numpy()\n","  return g2\n","\n","def save_fig(filename):\n","  plt.savefig(filename, bbox_inches = 'tight')\n","\n","def set_figsize(width_, height_):\n","  ff = plt.gcf()\n","  ff.set_figwidth(width_)\n","  ff.set_figheight(height_)\n","  ff.tight_layout()\n","\n","def tick_settings(ax, x_minor = 1, y_minor = 1):\n","  ax.xaxis.set_minor_locator(MultipleLocator(x_minor))\n","  ax.yaxis.set_minor_locator(MultipleLocator(y_minor))\n","  ax.tick_params(which='minor', bottom=True, top=True, left=True, right=True)\n","  ax.tick_params(bottom=True, top=True, left=True, right=True)\n","  ax.tick_params(axis = 'both', direction = 'in', length = 6, width = 1.5)\n","  ax.tick_params(which='minor', direction = \"in\", length = 4, width = 0.75)\n","\n","  for axis in ['top','bottom','left','right']:\n","    ax.spines[axis].set_linewidth(1.5)\n","\n","def plot_settings(ax, y_lim, x_lim, y_min, x_min, x_label, y_label):\n","  ax.set_ylim(y_lim)\n","  ax.set_xlim(x_lim)\n","  tick_settings(ax, y_minor = y_min, x_minor = x_min)\n","\n","  ax.set_xlabel(x_label, fontweight = 'bold')\n","  ax.set_ylabel(y_label, fontweight = 'bold')\n","\n","def save_csv_report(fits, col_lst ,filename):\n","  fits = pd.DataFrame(fits.T)\n","  fits.columns = col_lst\n","  fits.to_csv(filename)\n","\n","def find_nearest(array, value):\n","    array = np.asarray(array)\n","    idx = (np.abs(array - value)).argmin()\n","    return idx\n","\n","def get_onlyfile(folder):\n","  return [f for f in listdir(folder) if isfile(join(folder, f))]\n","\n","#### Common Helper Functions #####\n","\n","def jacobian_transform(x_w, I_w):\n","  hc = 1239.8\n","\n","  x_E_ev = hc/x_w\n","  x_frequency = 3E8/(x_w*1E-9)\n","  I_E = I_w/(x_E_ev**2)\n","  I_E = I_E/(x_frequency**3)\n","  #I_E = I_E/np.sum(I_E)\n","  #I_E = I_E / np.amax(I_E)\n","\n","  return np.array([x_E_ev, I_E]).T\n","\n","def gaussian(x, amplitude1, mean1, stddev1):\n","    return amplitude1/(stddev1*np.sqrt(2*3.14)) * np.exp(-0.5*((x - mean1) /(stddev1))**2)\n","\n","def gaussian_b(x, amplitude1, mean1, stddev1, b):\n","    return amplitude1/(stddev1*np.sqrt(2*3.14)) * np.exp(-0.5*((x - mean1) /(stddev1))**2) + b\n","\n","def gaussian2(x, amplitude1, mean1, stddev1, amplitude2, mean2, stddev2):\n","    return amplitude1/(stddev1*np.sqrt(2*3.14)) * np.exp(-0.5*((x - mean1) /(stddev1))**2) + amplitude2/(stddev2*np.sqrt(2*3.14)) * np.exp(-0.5*((x - mean2) /(stddev2))**2)\n","\n","def gaussian3(x, amplitude1, mean1, stddev1, amplitude2, mean2, stddev2, amplitude3, mean3, stddev3):\n","    return amplitude1/(stddev1*np.sqrt(2*3.14)) * np.exp(-0.5*((x - mean1) /(stddev1))**2) + amplitude2/(stddev2*np.sqrt(2*3.14)) * np.exp(-0.5*((x - mean2) /(stddev2))**2) + amplitude3/(stddev3*np.sqrt(2*3.14)) * np.exp(-0.5*((x - mean3) /(stddev3))**2)"]},{"cell_type":"code","source":["#@title set violin\n","def set_violinplots(bplot, bplot2):\n","  for pc, color, pc2 in zip(bplot['bodies'], color_lst, bplot2['bodies']):\n","    pc.set_facecolor(color)\n","    pc.set_edgecolor('none')\n","    pc.set_alpha(0.3)\n","\n","    pc2.set_facecolor('none')\n","    pc2.set_edgecolor('k')\n","    pc2.set_alpha(1)\n","    pc2.set_linewidth(2)\n","\n","  bplot['cmaxes'].set_color('none')\n","  bplot2['cmaxes'].set_color('none')\n","  bplot['cmins'].set_color('none')\n","  bplot2['cmins'].set_color('none')\n","  bplot['cbars'].set_color('none')\n","  bplot2['cbars'].set_color('black')\n","  bplot2['cbars'].set_zorder(0)\n","  bplot2['cmedians'].set_zorder(0)\n","  bplot2['cmedians'].set_color('k')"],"metadata":{"cellView":"form","id":"ioCWgFAKOD6K"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["lst1 = ['insert file paths here']\n","\n","lst2 = ['insert files paths here']\n","\n","directory_lst = [lst1,lst2]\n","\n","label_lst = ['PEA', 'Silica']\n","\n","color_lst = ['blue', 'red']\n","\n","save_location = 'save path here'\n","\n","if os.path.exists(save_location) == False:\n","      os.mkdir(save_location)\n","\n","## [1-'QD num', 2-'total counts',  3-'t avg (ns)', 4-'beta', 5-'g2', 6-'ON', 7-'GREY', 8-'OFF', 9-'bc type', 10-'auger type', 11-'max cps', 12-'time last ON (s)', 13-'num_levels',\n","##                14-'integrated em max (eV)', 15-'integrated fwhm (meV)', 16-'avg single shot em max (eV)', 17-'avg single shot fwhm (meV)', 18-'dell inf sq (meV^2)', 19-'t_c (s)', 20-'t5 SF em. max (eV)',\n","##                21-'t600 SF em. max (eV)', 22-'t5 SF FWHM (meV)', 23-'t600 SF FWHM (meV)', 24-decay rate (cps^2), 25- hc_type]"],"metadata":{"id":"yyJ7tF6-ldIv"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["#@title make all_lst\n","\n","count = 0\n","for group_n in range(len(directory_lst)):\n","  data = []\n","  count2 = 0\n","  for location in directory_lst[group_n]:\n","    # if count == 0:\n","    #   data.extend(read_csv(location + 'Compiled_QD_Stats_nan.csv'))\n","    # else:\n","      # if count2 == 10 or count2 == 11:\n","      #   data.extend(read_csv(location + 'Compiled_QD_Stats_nan2.csv'))\n","      # else:\n","    data.extend(read_csv('/content/sharepoint/Jessica Kline/Si v Ligand/Confocal 4K/'+location + 'Compiled_QD_Stats.csv'))\n","    count2 += 1\n","  count += 1\n","  data = np.array(data)\n","  data = data[:,1:]\n","\n","  print(len(data))\n","\n","  arr_labels = ['QD num','total counts',  't avg (ns)', 'beta', 'g2', 'ON', 'GREY', 'OFF', 'bc type', 'auger type', 'max cps', 'time last ON (s)', 'num_levels',\n","                'integrated em max (eV)', 'integrated fwhm (meV)', 'avg single shot em max (eV)', 'avg single shot fwhm (meV)', 'dell inf sq (meV^2)', 't_c (s)','t5 SF em. max (eV)',\n","                't600 SF em. max (eV)', 't5 SF FWHM (meV)', 't600 SF FWHM (meV)', 'decay rate (cps^2)', 'hc_type']\n","\n","  save_csv_report(data.T, arr_labels, save_location + label_lst[group_n] +'_All_QD_Stats.csv')"],"metadata":{"id":"m72Xi6aO3oIs","executionInfo":{"status":"ok","timestamp":1758791558345,"user_tz":-60,"elapsed":13810,"user":{"displayName":"Jessica Kline","userId":"05353286436116957595"}},"colab":{"base_uri":"https://localhost:8080/"},"outputId":"38138be1-ec0f-4370-84cd-2400837bb6ca","cellView":"form"},"execution_count":null,"outputs":[{"output_type":"stream","name":"stdout","text":["66\n","53\n"]}]},{"cell_type":"code","source":["#@title g2\n","\n","#bins = np.arange(0,0.5,0.05)\n","fig, axs = plt.subplot_mosaic([['c']], layout='tight')\n","\n","total_lst = []\n","for group_n in range(len(label_lst)):\n","  data = read_csv(save_location + label_lst[group_n] +'_All_QD_Stats.csv')\n","\n","  total_hist = np.histogram(data[:,5], bins = np.arange(0,0.5,0.05))\n","\n","  # print(data[:,1][data[:,7] > 0.35])\n","\n","  total_lst.append(data[:,5][~np.isnan(data[:,5])])\n","\n","  g2_hist = np.array([x/np.nanmax(total_hist[0]) for x in total_hist[0]])\n","\n","\n","label = 'c'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(total_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(total_lst, showmedians = True, showmeans= False, vert = False)\n","\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(total_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(total_lst[group_n]))\n","  axs[label].scatter(total_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","\n","set_violinplots(bplot, bplot2)\n","\n","plot_settings(ax = axs[label], x_lim = [-0.01,1], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 0.1, x_label = 'g2', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","set_figsize(width_ = 6, height_= 6)\n","\n","save_fig(save_location + 'g2_comp.png')"],"metadata":{"cellView":"form","id":"Pt2Qz6Wulu55"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["#@title lifetime\n","\n","\n","#bins = np.arange(0,0.5,0.05)\n","fig, axs = plt.subplot_mosaic([['c']], layout='tight')\n","\n","total_lst = []\n","for group_n in range(len(label_lst)):\n","  data = read_csv(save_location + label_lst[group_n] +'_All_QD_Stats.csv')\n","\n","  # total_hist = np.histogram(data[:,7], bins = np.arange(0,0.5,0.05))\n","\n","  total_lst.append(data[:,3][~np.isnan(data[:,3])])\n","\n","  # g2_hist = np.array([x/np.nanmax(total_hist[0]) for x in total_hist[0]])\n","\n","\n","label = 'c'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(total_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(total_lst, showmedians = True, showmeans= False, vert = False)\n","\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(total_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(total_lst[group_n]))\n","  axs[label].scatter(total_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","\n","set_violinplots(bplot, bplot2)\n","\n","plot_settings(ax = axs[label], x_lim = [0,1], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 1, x_label = 'avg tau (ns)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","# axs[label].set_xticks([0,2,4,6,8,10])\n","\n","set_figsize(width_ = 6, height_= 6)\n","\n","save_fig(save_location + 'lifetime_comp.png')"],"metadata":{"cellView":"form","id":"DEsNjkbQ5wZq"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["#@title blue shift in time\n","fig, axs = plt.subplot_mosaic([[ 'd'], ['f'], ['c']], layout='tight')\n","\n","total_lst = []\n","max_lst = []\n","for group_n in range(len(label_lst)):\n","  data = read_csv(save_location + label_lst[group_n] +'_All_QD_Stats.csv')\n","\n","  total_lst.append(data[:,21]-data[:,20])\n","  total_lst[-1] = total_lst[-1][~np.isnan(total_lst[-1])]\n","  max_lst.append(data[:,23] - data[:,22])\n","  max_lst[-1] = max_lst[-1][~np.isnan(max_lst[-1])]\n","\n","  label = 'c'\n","  axs[label].scatter(data[:,21]-data[:,20], data[:,23] - data[:,22], color = color_lst[group_n])\n","\n","\n","label = 'c'\n","axs[label].set_xlabel('delta(600-5) Em. Max')\n","axs[label].set_ylabel('delta(600-5) FWHM')\n","\n","label = 'd'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(total_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(total_lst, showmedians = True, showmeans= False, vert = False)\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(total_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(total_lst[group_n]))\n","  axs[label].scatter(total_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","set_violinplots(bplot, bplot2)\n","plot_settings(ax = axs[label], x_lim = [-.1,0.2], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 1, x_label = 'delta(5-600) Em. max (eV)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","\n","\n","label = 'f'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(max_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(max_lst, showmedians = True, showmeans= False, vert = False)\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(max_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(max_lst[group_n]))\n","  axs[label].scatter(max_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","set_violinplots(bplot, bplot2)\n","plot_settings(ax = axs[label], x_lim = [-50,120], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 50, x_label = 'delta(5-600) FWHM (meV)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","\n","set_figsize(width_ = 6, height_= 10)\n","\n","save_fig(save_location + 'blue_shift_in_time.png')\n"],"metadata":{"cellView":"form","id":"BPvlZBG_Dn67"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["#@title pl characteristics TI vs SF\n","\n","fig, axs = plt.subplot_mosaic([['c', 'd'], ['e', 'f']], layout='tight')\n","\n","total_lst = []\n","max_lst = []\n","for group_n in range(len(label_lst)):\n","  data = read_csv(save_location + label_lst[group_n] +'_All_QD_Stats.csv')\n","\n","  label = 'c'\n","  axs[label].scatter(data[:,14], data[:,16], color = color_lst[group_n])\n","\n","  label = 'e'\n","  axs[label].scatter(data[:,15], data[:,17], color = color_lst[group_n])\n","\n","  total_lst.append(data[:,14]-data[:,16])\n","  max_lst.append(data[:,15] - data[:,17])\n","\n","\n","# plot_settings(ax = axs[label], x_lim = [0,10], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 1, x_label = 'avg tau (ns)', y_label = '')\n","label = 'c'\n","axs[label].set_xlabel('TI Em. Max (eV)')\n","axs[label].set_ylabel('SF Em.Max (eV)')\n","\n","label = 'e'\n","axs[label].set_xlabel('TI FWHM (meV)')\n","axs[label].set_ylabel('SF FWHM (meV)')\n","\n","label = 'd'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(total_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(total_lst, showmedians = True, showmeans= False, vert = False)\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(total_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(total_lst[group_n]))\n","  axs[label].scatter(total_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","set_violinplots(bplot, bplot2)\n","plot_settings(ax = axs[label], x_lim = [-.05, 0.05], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 1, x_label = 'delta Em. max (eV)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","\n","\n","label = 'f'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(max_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(max_lst, showmedians = True, showmeans= False, vert = False)\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(max_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(max_lst[group_n]))\n","  axs[label].scatter(max_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","set_violinplots(bplot, bplot2)\n","plot_settings(ax = axs[label], x_lim = [-50, 100], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 1, x_label = 'delta FWHM (eV)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","\n","set_figsize(width_ = 12, height_= 10)\n","\n","save_fig(save_location + 'TIvsSF_pl_comp.png')"],"metadata":{"id":"5fFTnHtjuq-b","cellView":"form"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["#@title pl characteristics TI\n","\n","fig, axs = plt.subplot_mosaic([['c'], ['d'], ['e']], layout='tight')\n","\n","total_lst = []\n","max_lst = []\n","for group_n in range(len(label_lst)):\n","  data = read_csv(save_location + label_lst[group_n] +'_All_QD_Stats.csv')\n","\n","  total_lst.append(data[:,15][~np.isnan(data[:,15])])\n","  max_lst.append(data[:,14][~np.isnan(data[:,14])])\n","\n","  label = 'c'\n","  axs[label].scatter(data[:,14], data[:,15], color = color_lst[group_n])\n","\n","\n","# plot_settings(ax = axs[label], x_lim = [0,10], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 1, x_label = 'avg tau (ns)', y_label = '')\n","axs[label].set_xlabel('TI Em. Max (eV)')\n","axs[label].set_ylabel('TI FWHM (meV)')\n","\n","label = 'd'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(total_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(total_lst, showmedians = True, showmeans= False, vert = False)\n","\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(total_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(total_lst[group_n]))\n","  axs[label].scatter(total_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","set_violinplots(bplot, bplot2)\n","\n","plot_settings(ax = axs[label], x_lim = [10,50], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 10, x_label = 'TI FWHM (meV)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","label = 'e'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(max_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(max_lst, showmedians = True, showmeans= False, vert = False)\n","\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(max_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(max_lst[group_n]))\n","  axs[label].scatter(max_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","set_violinplots(bplot, bplot2)\n","\n","plot_settings(ax = axs[label], x_lim = [2.35,2.5], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 10, x_label = 'TI Em. Max (eV)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","set_figsize(width_ = 6, height_= 10)\n","\n","save_fig(save_location + 'TI_pl_comp.png')"],"metadata":{"id":"FHHP-SYGNCa4","cellView":"form"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["#@title pl characteristics SF\n","\n","fig, axs = plt.subplot_mosaic([['c'], ['d'], ['e']], layout='tight')\n","\n","total_lst = []\n","max_lst = []\n","for group_n in range(len(label_lst)):\n","  data = read_csv(save_location + label_lst[group_n] +'_All_QD_Stats.csv')\n","\n","  total_lst.append(data[:,17][~np.isnan(data[:,17])])\n","  max_lst.append(data[:,16][~np.isnan(data[:,16])])\n","\n","  label = 'c'\n","  axs[label].scatter(data[:,16], data[:,17], color = color_lst[group_n])\n","\n","\n","# plot_settings(ax = axs[label], x_lim = [0,10], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 1, x_label = 'avg tau (ns)', y_label = '')\n","axs[label].set_xlabel('SF Em. Max (eV)')\n","axs[label].set_ylabel('SF FWHM (meV)')\n","\n","label = 'd'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(total_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(total_lst, showmedians = True, showmeans= False, vert = False)\n","\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(total_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(total_lst[group_n]))\n","  axs[label].scatter(total_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","set_violinplots(bplot, bplot2)\n","\n","plot_settings(ax = axs[label], x_lim = [10,50], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 10, x_label = 'SF FWHM (meV)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","label = 'e'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(max_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(max_lst, showmedians = True, showmeans= False, vert = False)\n","\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(max_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(max_lst[group_n]))\n","  axs[label].scatter(max_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","set_violinplots(bplot, bplot2)\n","\n","plot_settings(ax = axs[label], x_lim = [2.35,2.5], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 10, x_label = 'SF Em. Max (eV)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","set_figsize(width_ = 6, height_= 10)\n","\n","save_fig(save_location + 'SF_pl_comp.png')"],"metadata":{"cellView":"form","id":"plMK0zgDi0T_"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["#@title SD comp\n","\n","fig, axs = plt.subplot_mosaic([['d'], ['e']], layout='tight')\n","\n","total_lst = []\n","max_lst = []\n","for group_n in range(len(label_lst)):\n","  data = read_csv(save_location + label_lst[group_n] +'_All_QD_Stats.csv')\n","\n","  total_lst.append(data[:,18][~np.isnan(data[:,18])])\n","  max_lst.append(data[:,19][~np.isnan(data[:,19])])\n","\n","\n","label = 'd'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(total_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(total_lst, showmedians = True, showmeans= False, vert = False)\n","\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(total_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(total_lst[group_n]))\n","  axs[label].scatter(total_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","set_violinplots(bplot, bplot2)\n","\n","plot_settings(ax = axs[label], x_lim = [0, 5], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 500, x_label = 'dell inf sq (meV^2)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","label = 'e'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(max_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(max_lst, showmedians = True, showmeans= False, vert = False)\n","\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(max_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(max_lst[group_n]))\n","  axs[label].scatter(max_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","set_violinplots(bplot, bplot2)\n","\n","plot_settings(ax = axs[label], x_lim = [0, 15], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 10, x_label = 't_c (s)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","set_figsize(width_ = 6, height_= 10)\n","\n","save_fig(save_location + 'SD_comp.png')"],"metadata":{"id":"z9J1MLeQkrMS","cellView":"form"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["#@title on/grey/off\n","\n","fig, axs = plt.subplot_mosaic([['a'], ['b'], ['c']], layout='tight')\n","\n","num_lst = [6,7,8]\n","ax_label_lst = ['a', 'b', 'c']\n","x_lable_lst = ['ON%', 'GREY%', 'OFF%']\n","\n","for num in range(len(num_lst)):\n","  total_lst = []\n","  for group_n in range(len(label_lst)):\n","    data = read_csv(save_location + label_lst[group_n] +'_All_QD_Stats.csv')\n","\n","    # total_hist = np.histogram(data[:,7], bins = np.arange(0,0.5,0.05))\n","\n","    total_lst.append(data[:,num_lst[num]][~np.isnan(data[:,num_lst[num]])]*100)\n","\n","    # g2_hist = np.array([x/np.nanmax(total_hist[0]) for x in total_hist[0]])\n","\n","  label = ax_label_lst[num]\n","  bplot = axs[label].violinplot(total_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","  bplot2 = axs[label].violinplot(total_lst, showmedians = True, showmeans= False, vert = False)\n","\n","  for group_n in range(len(directory_lst)):\n","    x = np.zeros(len(total_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(total_lst[group_n]))\n","    axs[label].scatter(total_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","  set_violinplots(bplot, bplot2)\n","\n","  plot_settings(ax = axs[label], x_lim = [-5,100], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 10, x_label = x_lable_lst[num], y_label = '')\n","  axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","  axs[label].set_yticklabels(label_lst)\n","  axs[label].set_xticks([0,20,40,60,80,100])\n","\n","set_figsize(width_ = 6, height_= 10)\n","\n","save_fig(save_location + 'ON_GREY_OFF_comp.png')"],"metadata":{"cellView":"form","id":"WSXy-040N4uP"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["#@title average count rate\n","\n","#bins = np.arange(0,0.5,0.05)\n","fig, axs = plt.subplot_mosaic([['c'], ['d'], ['e']], layout='tight')\n","\n","total_lst = []\n","fraction_lst = []\n","time_lst = []\n","for group_n in range(len(label_lst)):\n","  data = read_csv(save_location + label_lst[group_n] +'_All_QD_Stats.csv')\n","\n","  temp = data[:,2][~np.isnan(data[:,2])]/600\n","  fraction_lst.append(temp/data[:,11][~np.isnan(data[:,11])]*100)\n","  temp /= 1000\n","\n","  time_lst.append(data[:,12][~np.isnan(data[:,12])]/600*100)\n","\n","  # total_hist = np.histogram(data[:,4], bins = np.arange(0,1E7,1E5))\n","  total_hist = np.histogram(temp, bins = np.arange(0,30,1))\n","\n","  # total_lst.append(data[:,4])\n","  total_lst.append(temp)\n","\n","  g2_hist = np.array([x/np.nanmax(total_hist[0]) for x in total_hist[0]])\n","\n","\n","label = 'c'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(total_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(total_lst, showmedians = True, showmeans= False, vert = False)\n","\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(total_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(total_lst[group_n]))\n","  axs[label].scatter(total_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","\n","set_violinplots(bplot, bplot2)\n","\n","plot_settings(ax = axs[label], x_lim = [0,15], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 1E5, x_label = 'average counts (kcps)', y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","label = 'd'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(fraction_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(fraction_lst, showmedians = True, showmeans= False, vert = False)\n","\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(fraction_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(fraction_lst[group_n]))\n","  axs[label].scatter(fraction_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","\n","set_violinplots(bplot, bplot2)\n","\n","plot_settings(ax = axs[label], x_lim = [0,100], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 1E5, x_label = \"I$_{avg}$/I$_{max}$ (%)\", y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","\n","label = 'e'\n","medianprops = dict(linestyle='-', linewidth=1, color='k')\n","bplot = axs[label].violinplot(time_lst, showmedians = False, showmeans= False, vert = False)#, labels = label_lst, patch_artist = True, showfliers = False, medianprops = medianprops, widths = 0.5, zorder = 0)\n","bplot2 = axs[label].violinplot(time_lst, showmedians = True, showmeans= False, vert = False)\n","\n","for group_n in range(len(directory_lst)):\n","  x = np.zeros(len(time_lst[group_n])) + np.random.normal(group_n+1, 0.04, len(time_lst[group_n]))\n","  axs[label].scatter(time_lst[group_n], x, color = color_lst[group_n], zorder = 1)\n","\n","\n","set_violinplots(bplot, bplot2)\n","\n","plot_settings(ax = axs[label], x_lim = [0,100], y_lim = [0.5, len(directory_lst)+0.5], y_min = 1, x_min = 1E5, x_label = \"last ON event (%)\", y_label = '')\n","axs[label].set_yticks(np.arange(1, len(label_lst)+1))\n","axs[label].set_yticklabels(label_lst)\n","\n","set_figsize(width_ = 6, height_= 10)\n","\n","save_fig(save_location + 'average_count_rate.png')"],"metadata":{"cellView":"form","id":"lYQfhnrW-0rT"},"execution_count":null,"outputs":[]},{"cell_type":"code","source":["#@title auger vs BC\n","\n","fig, axs = plt.subplot_mosaic([['c']], layout='tight')\n","\n","auger_count = []\n","bc_count = []\n","pair =[]\n","for group_n in range(len(label_lst)):\n","  data = read_csv(save_location + label_lst[group_n] +'_All_QD_Stats.csv')\n","\n","  # auger_count.append(np.sum(data[:, 12]))\n","  # bc_count.append(np.sum(data[:, 11]))\n","  total = np.sum(data[:, 9][~np.isnan(data[:,9])]) + np.sum(data[:, 10][~np.isnan(data[:,10])])+ np.sum(data[:, 25][~np.isnan(data[:,25])])\n","\n","  pair.append([np.sum(data[:, 9][~np.isnan(data[:,9])])/total, np.sum(data[:, 10][~np.isnan(data[:,10])])/total, np.sum(data[:, 25][~np.isnan(data[:,25])])/total])\n","\n","\n","label ='c'\n","\n","num = len(pair)\n","width_ = 0.5/num\n","\n","for n in range(0, num):\n","  edge = -0.25 + n*width_\n","  x_ = np.arange(edge, 2.1+edge, 1)\n","  axs[label].bar(x_, pair[n], width = width_, color = color_lst[n], edgecolor = 'k', align = 'edge', label = label_lst[n])\n","\n","plot_settings(ax = axs[label], y_lim = [0,1.05], x_lim = [-.5, len(pair)+0.5], y_min = 1, x_min = 1, x_label = '', y_label = 'probability')\n","axs[label].set_xticks([0,1,2])\n","axs[label].set_xticklabels(['BC', 'Auger', 'HC'])\n","axs[label].legend(fontsize = 16)\n","\n","save_fig(save_location + 'auger_vs_bc.png')"],"metadata":{"id":"YaV3lqbIDKir","cellView":"form"},"execution_count":null,"outputs":[]}],"metadata":{"colab":{"provenance":[],"authorship_tag":"ABX9TyMknZ8Wf5HCYoc/OJ09+jFf"},"kernelspec":{"display_name":"Python 3","name":"python3"},"language_info":{"name":"python"}},"nbformat":4,"nbformat_minor":0}
